# 🐓 מערכת הזמנות זוארס - Zoares Order System

מערכת הזמנות מתקדמת לניהול הזמנות עופות, בשר ודגים עם ממשק משתמש נוח בעברית.

## 🌟 תכונות עיקריות

### 📱 אפליקציית לקוחות
- הזמנות קלות ומהירות
- עגלת קניות מתקדמת
- חיפוש חכם במוצרים
- אינטגרציה עם וואטסאפ
- ממשק RTL מותאם לעברית

### 🖥️ אפליקציית מנהל
- ניהול הזמנות מתקדם
- ניתוח נתונים מקיף
- ניהול לקוחות
- מעקב אחר סטטוס הזמנות
- דוחות מפורטים

### 🗄️ מסד נתונים מרכזי
- SQLite משותף בין האפליקציות
- סנכרון נתונים בזמן אמת
- גיבוי אוטומטי
- ניקוי נתונים ישנים

## 🚀 התקנה והפעלה

### דרישות מערכת
- Python 3.7+
- Streamlit
- SQLite3

### התקנה
```bash
git clone https://github.com/Yaron-zoares/zoares-order-system.git
cd zoares-order-system
pip install -r requirements.txt
```

### הפעלה
```bash
# אפליקציית לקוחות (פורט 8505)
streamlit run customer_app.py --server.port 8505

# אפליקציית מנהל (פורט 8501)
streamlit run app.py --server.port 8501
```

## 📊 קטגוריות מוצרים

### 🍗 עופות
- עוף שלם, חזה עוף, שניצל עוף
- כנפיים, כרעיים, ירכיים, שוקיים
- קורקבן, טחול, כבד, לב עוף
- עוף טחון, טחון מיוחד, שווארמה עוף

### 🥩 בשר
- בשר בקר טחון, צלעות בקר
- בשר כבש, המבורגר הבית
- טחון קוקטייל הבית, בשר עגל
- פילה מדומה, פילה פרמיום
- צלעות, שריר, אונטריב, רגל פרה

### 🐟 דגים
- סלמון, טונה, מושט, אחר

### 🦃 הודו
- הודו שלם נקבה, חזה הודו נקבה
- שווארמה הודו נקבה, קורקבן הודו
- כנפיים הודו, שוקיים הודו
- לבבות הודו, גרון הודו, ביצי הודו

## 🔧 תכונות טכניות

### סנכרון נתונים אוטומטי
- **רענון אוטומטי**: המערכת מתעדכנת כל 30 שניות
- **כפתורי רענון ידניים**: בכל דף יש כפתור רענון נפרד
- **מסד נתונים משותף**: SQLite מרכזי עם סנכרון מושלם
- **עדכונים בזמן אמת**: שינויים מופיעים מיד בשתי האפליקציות

### ניהול הזמנות מתקדם
- **עריכה דינמית**: שינוי פרטי הזמנה בכל שלב
- **מעקב סטטוס**: עדכון סטטוס הזמנות
- **היסטוריה מלאה**: שמירת כל ההזמנות (פעילות וסגורות)
- **ניקוי אוטומטי**: מחיקת הזמנות ישנות לפי הגדרות

### אנליטיקה וניתוח
- **ניתוח לקוחות**: מעקב אחר הרגלי הזמנה
- **ניתוח מוצרים**: מוצרים פופולריים וטרנדים
- **ניתוח זמנים**: פילוח לפי חודשים וחגים
- **דוחות מתקדמים**: ניתוחים מקיפים עם גרפים

## 📱 אינטגרציה עם וואטסאפ

### שליחת הזמנות
- **הודעה אוטומטית**: פרטי הזמנה נשלחים לוואטסאפ
- **קישור מהיר**: כפתור "שלח לוואטסאפ" בכל הזמנה
- **פרטים מלאים**: שם לקוח, מוצרים, כמויות והערות
- **מספר טלפון אוטומטי**: שימוש במספר הטלפון של הלקוח

## 🆕 עדכונים אחרונים

### 🆕 עדכונים חדשים (ינואר 2025)

* **תיקון סנכרון נתונים**: פתרון בעיית עדכון נתונים בין אפליקציות
* **רענון אוטומטי**: המערכת מתעדכנת כל 30 שניות
* **כפתורי רענון ידניים**: בכל דף יש כפתור רענון נפרד
* **שיפור ביצועים**: טעינת נתונים מהירה יותר
* **תיקון שגיאות**: פתרון בעיות עדכון נתונים

### 🆕 עדכונים חדשים (דצמבר 2024)

* **תיקון שגיאות עריכה**: פתרון בעיות NameError, TypeError ו-IntegrityError בעריכת הזמנות
* **שיפור ניהול הזמנות**: המערכת משתמשת בפונקציות מסד הנתונים במקום שמירה לרשימה בזיכרון
* **תיקון מבנה פריטים**: טיפול נכון במבנה items עם quantity ו-price
* **תיקון חישובים אנליטיים**: המרת כמויות למספרים לפני חישובים
* **תיקון סגירת הזמנות**: שימוש ב-INSERT OR REPLACE למניעת שגיאות UNIQUE constraint

### 🆕 עדכונים חדשים (אוגוסט 2025)

* **מסד נתונים מרכזי SQLite**: מעבר מקבצי JSON למסד נתונים מרכזי
* **בסיס נתונים משותף**: קישור בין אפליקציית הלקוחות למנהל
* **ניהול לקוחות**: ניהול וניתוח נתוני לקוחות
* **ניתוח מתקדם**: ניתוחים מקיפים עם קישור ללקוחות
* **שמירת נתונים**: נתוני לקוחות נשמרים ל-365 ימים
* **קטגוריית הודו:** הוספת קטגוריה חדשה עם מוצרי הודו מגוונים (כולל "נקבה" למוצרים רלוונטיים)
* **קטגוריית המבורגר הבית:** המבורגר הבית ללא מגבלות הזמנה
* **מוצרים חדשים:** קורקבן עוף, טחול עוף, טחון מיוחד, פילה פרמיום, טחון קוקטייל הבית
* **אפשרויות חיתוך מורחבות:** חיתוך מתקדם לכל סוגי העופות והבשר
* **אינטגרציה עם וואטסאפ:** כפתורים מהירים עם הודעות מוכנות
* **עדכון עלויות משלוח:** בני ברק 20 ש"ח, מחוץ לבני ברק 25 ש"ח
* **עדכון שעות פעילות:** יום שישי 6:00-12:00
* **עופות טריים ארוזים:** התאמה אישית ביחידות ו/או במשקל
* **יישור לימין:** ממשק RTL מותאם לעברית
* **ללא מגבלות:** הזמנה ללא הגבלת משקל או יחידות
* **תיקון "עגלה ריקה":** הודעת הצלחה לאחר הזמנה במקום "עגלה ריקה"
* **ניקוי תיקיות כפולות:** הסרת תיקיות וקבצים מיותרים

## 🔧 שיפורים טכניים

* **מעבר ל-SQLite**: שיפור ביצועים וסנכרון נתונים
* **תיקון סנכרון:** הסרת הזמנות מתבצעת לפי מזהה (`id`) בלבד, למניעת שגיאות ולשמירה על תקינות הנתונים.
* **שיפור חוויית ניהול:** כל שינוי (סגירה, מחיקה, עדכון) משפיע מיידית על הרשימה ומסונכרן עם מסד הנתונים.
* **עגלת קניות משופרת:** ניהול קל יותר של פריטים עם אפשרויות עריכה
* **מעקב הזמנות:** חיפוש מתקדם לפי שם או מספר טלפון
* **ניהול לקוחות:** מעקב אחר לקוחות והיסטוריית הזמנות
* **ניתוח מתקדם:** ניתוחים מקיפים עם קישור ללקוחות
* **תיקון NameError:** הוספת PRODUCT\_PRICES לאפליקציית הלקוחות
* **ניקוי מבנה הפרויקט:** הסרת תיקיות כפולות וקבצים מיותרים
* **הקפאת מחירים:** מחירים מוקפאים עד להודעה חדשה באפליקציית הלקוחות
* **שליחת הזמנה:** כפתור "שלח הזמנה" במקום "שמור הזמנה"
* **אינטגרציה וואטסאפ:** שליחת פרטי הזמנה לוואטסאפ לאחר הזמנה מוצלחת
* **הסרת חישובי מחיר:** הסיידבר לא מציג מחירים בשלב זה

## 📋 בעיות נפוצות ופתרונות

### בעיות סנכרון נתונים
* **בעיה**: המערכת לא מתעדכנת עם שינויים חדשים
* **פתרון**: המערכת מתעדכנת אוטומטית כל 30 שניות, או השתמש בכפתורי הרענון הידניים

### בעיות מסד נתונים
* **בעיה**: "database is locked"
* **פתרון**: וודא שהאפליקציה סגורה לפני פתיחת הקובץ
* **כלי מומלץ**: השתמש ב-DB Browser for SQLite לצפייה בנתונים

### בעיות הרצה
* **בעיה**: "File does not exist"
* **פתרון**: וודא שהאפליקציה רצה מהתיקייה הנכונה (`zoares-order-system`)
* **פקודה**: `cd zoares-order-system` לפני הרצת האפליקציות

## 🤝 תרומה לפרויקט

אנחנו תמיד שמחים לקבל תרומות! אם יש לך רעיונות לשיפור או תיקון באגים:

1. Fork את הפרויקט
2. צור branch חדש (`git checkout -b feature/AmazingFeature`)
3. Commit את השינויים (`git commit -m 'Add some AmazingFeature'`)
4. Push ל-branch (`git push origin feature/AmazingFeature`)
5. פתח Pull Request

## 📞 תמיכה

אם יש לך שאלות או בעיות:
- פתח Issue ב-GitHub
- פנה אלינו ישירות

## 📄 רישיון

פרויקט זה מוגן תחת רישיון MIT. ראה קובץ `LICENSE` לפרטים נוספים.

---

**מערכת הזמנות זוארס** - ניהול הזמנות פשוט, מהיר ואמין! 🐓✨ 

